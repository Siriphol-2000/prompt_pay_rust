# PromptPayUtils

`PromptPayUtils` เป็นเครื่องมือที่ช่วยในการสร้าง **PromptPay Payload** ที่สอดคล้องกับมาตรฐานของระบบ **PromptPay** ในประเทศไทย ซึ่งสามารถนำไปใช้ในการโอนเงินหรือชำระเงินผ่านหมายเลขโทรศัพท์มือถือที่ลงทะเบียนไว้ในระบบ PromptPay

## วิธีการทำงาน

`PromptPayUtils` มีการทำงานดังต่อไปนี้:

1. **การปรับรูปแบบหมายเลขโทรศัพท์**:
   - ฟังก์ชัน `sanitize_phone_number` จะช่วยลบอักขระที่ไม่จำเป็น (เช่น `-`, `+`) ออกจากหมายเลขโทรศัพท์ และตรวจสอบความถูกต้องให้หมายเลขโทรศัพท์มีความยาว 9 หลักตามมาตรฐาน

2. **การแปลงจำนวนเงินเป็นสตางค์**:
   - จำนวนเงินที่ใส่เข้ามา (หน่วยบาท) จะถูกคำนวณและแปลงเป็นหน่วยสตางค์ (1 บาท = 100 สตางค์)

3. **การสร้าง Payload**:
   - ฟังก์ชัน `generate_payload` จะนำหมายเลขโทรศัพท์ที่ปรับรูปแบบแล้วและจำนวนเงิน มาสร้างเป็น **PromptPay Payload** ซึ่งรวมถึงการเติมค่าตรวจสอบ (CRC) เพื่อความถูกต้อง

4. **การคำนวณ CRC-16 (XMODEM)**:
   - ใช้ฟังก์ชัน `calculate_precise_crc` สำหรับคำนวณค่า CRC-16 เพื่อเพิ่มความปลอดภัยและป้องกันการเปลี่ยนแปลงของข้อมูล

## การติดตั้ง

โปรดเพิ่ม `PromptPayUtils` เข้าไปในโปรเจกต์ Rust ของคุณ โดยการคัดลอกโค้ดนี้ลงในไฟล์ที่ต้องการ หรือใช้เครื่องมือจัดการ dependency หากมีการพัฒนาเป็นไลบรารี

## ตัวอย่างการใช้งาน

```rust
use promptpay_utils::PromptPayUtils;

fn main() {
    let phone_number = "+66-812345678".to_string();
    let amount = 123.45;

    match PromptPayUtils::generate_payload(phone_number, amount) {
        Ok(payload) => println!("Payload: {}", payload),
        Err(err) => eprintln!("Error: {}", err),
    }
}
